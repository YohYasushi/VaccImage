# VaccImage
## 更新経過の簡単な記載はこちら。
ただし、「README.md」などの細かい修正は、逐一記載しないで行っています。常に最新版を見るようにしてください。

## <対応予定の事柄など備忘録 極めて雑多 順不同 分類ゆるめ>
### SQLに関して
- ワクチン種類によっては大人で2種類のDoseがある場合がある、柔軟な対応を。x人分余る、じゃなくて、どの接種方法なら何回分あまるのか、を集計する方法を考えること <= ポイントで簡易的に表示することで落とし所。 <= 接種ポイントで対応したまま。
- 死亡患者の処理 <= まだ。
- Timezone JAPAN ASIA <= まだってか各自で対応されてください。
- とにかく区切りをしっかりつけることを目指す <= TERMの管理はVer2.0.0では見送りました。無理です。
- 英語混入IDの検索が対応できていない・・・。

### UIに関して
- 昭和のUIのママになっている。

### PHPに関して
- ワクチンタイプ、部署をいじるためのパスワードのセットもいる
- ワクチンの種類・接種方法、施設、所属施設の管理ページを作成し、こちらはログイン時にパスワード管理とする。
- Readme.meにPHPのVersionの明記
- 部署名とかワクチンタイプのIDのチェックディジット。
- 部署名とかワクチンタイプの編集はパスワードロックかけておく  
 -> 全体にパスワードはかけていないままVer2で公開する予定。  

### 他全般
- Win10でのSQLコマンドの対応 <= できていない2022/01/20時点で。
- CentOS streamの挙動確認 -> 2022/01/19の時点ではちょっと見送り。

### 2022/01/25
26日未明にかけて、
- 全角スペースのTrim
- 半角カタカナの全角への変換
- 全角英数字の半角への変換
を修正した。ってか、SQLにINSERTするところで、Utilityの関数をスルーして入れているという著明なエラーがあったので急いで修正した。  
まだまだ半人前にもなっていないのかもしれない。

### 2022/01/24
READMEを大幅に更新した。  
施設ごとの事情に合わせたデータベース変更について。  

### 2022/01/23
今日、思いついたこと。  
SQLが進んできたので、PHPと絡めて予約登録数の制限、かけられるかもしれない。
カレンダーのUIを練らないといけないけど、なんとかなるかもしれないね。  
未来日のバイアル必要数については、明日から取り組みたいね。  

### 2022/01/22
ワクチンのカウント、より詳細に。未来日の必要バイアル数を、クエリーで出力するページ、TOPに作ることとする。  
どうもUIの見通しが悪いのでなんとかしたい。  

### 2022/01/20
Ver2.0.0としてGitHubにUPした。  
ともかくもおめでとう。  

### 2022/01/19
バイアル集計、すべてSQLで完了した！感無量。  
VIEWは減らした。ワクチン特異的なVIEWをなくした。
接種歴、バイアルいじった履歴の修正のページが最後のおお仕事。  
 -> 簡易ながら、削除と修正のページを作ったのでこの時点でUPすることとする。  
最終、解説を見直してGitHubにアプデの予定。  

### 2022/01/18
バイアル合計の集計をSQLでなんとか出すことができた。  
VIEWが増えすぎてきて困っている。最小限にしたいのだが。  
UIが荒削りであるが、だいぶ完成に近づいてきた。  
パスワードかけない状態なら、1月中にCodeの公開ができそう!!

### 2022/01/17
最終のワクチンカウントのSQLが仕上がらない。  
使用バイアル数のSUMの計算がうまく行った。  

### 2022/01/16
Listからの入力を、SQLに含まれているか判断する関数作成。  
ターム区切りと、ワクチンバイアルカウント修正の処理が思いつかない。  

### 2022/01/14
1/13の課題はほぼパス。  
午前にSQLからのスカラー量を出力する関数を作成した。  
これがあったら、あとはHTMLとCSSの成形でバイアル数など表示ができる。  
ターム区切りとバイアル数のカウントは、あと最後の一山。  

### 2022/01/13
SQLのみで、端数バイアルの処理がほぼ完了した。  
これは決定的にでかい。  
まずこれでVIEWを作ってしまう。ワクチン種類ごとのVIEWを作る方向で行く。  
あとはタームでの区切りとバイアル消費量の計算をスカラークエリーでする。  
明日以後は、過去の接種済み、当日の接種済みと未接種の区別、未来の未接種、の3つのテーブルの区分けを統合を図る。  
その上で再度、ワクチン種類ごとのVIEWへともっていく。

### 2022/01/12
SQLへの入力規制、対応ほぼ完了。  
いよいよワクチン端数の計算に移る。  

### 2022/01/07
年明け初の更新。 
PHPで入力規制を詰めたい。  
遊んでいたわけじゃなくて、この間は知識のインストールをしていた。

### 2021/12/23
未明からかなり大詰めした。
でも、バイアル端数計算が最大の難所。

### 2021/12/22
患者検索の画面が難航。
患者登録の画面完了。

### 2021/12/21
SQLが大体、煮詰まってきた。
成書も読んで最終のつめ、時間かけて。
年齢などのカウントもSQL側で実装を。

### 2021/12/17
ReadMe訂正。 
Win10のセットアップ方法もReadMeに今後は記載する予定とす。
部署のHTMLの扱いについて、脳内で頓挫する。



### 2021/12/14
フォルダ構成大幅変更。以後はGitHubによるVersion管理としフォルダ管理はしないことにする。
以後の方針として、HTMLでのデータ受け渡しを行わないので、Ver2.0以後はReadme.mdが大幅に変更される予定。
とりあえずとして追記した。
下記コマンドでWinでのSQLの環境作成を備忘録として記載しておく。

```
cd C:\xampp\mysql\bin
mysql -u root
```
とりあえず切り口がわからない状態。
SQLの再構築から行っていく方針。
しばらく端末間のCodeの同期はDropboxのみで行う。GitHubにはあげない。

### 2021/12/12
上記の備忘録に随時記載していく。

### 2021/12/11
UbuntuのPCにMySQL環境再構築し、開発再開する。

### 2021/06/05
「vaccimageWin10SetUpHowTo.pdf」をUPした。各ドキュメント修正。

### 2021/06/04
「PageShowInfluenzaResult.php」のページが、PHP 8.0.xでエラーをはいたため、修正し「1.0.1」でUPした。  
Windows10Proでの稼働を確認。この確認時の上述のエラーを確認した。  
同時にWin10でのXAMPPなどセットアップ方法を記載したドキュメント「vaccimageWin10Install.pdf」をアップした。これはかなりわかりやすいと思われます。  
23:31 「vaccimageWin10Install.pdf」訂正し、再度UP。

### 2021/06/02
GitHubにフォルダ「vaccimage1.00」ごとUpした。「.js」ファイルだけなぜか認識されず。原因究明を。現在は稼働しておりませんが。
